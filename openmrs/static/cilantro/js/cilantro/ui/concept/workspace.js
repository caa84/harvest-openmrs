define(["underscore","marionette","loglevel","../core","../base","../welcome","../config","./form"],function(e,t,i,o,n,r,s,c){var a=n.ErrorView.extend({template:"concept/error"}),w=t.Layout.extend({className:"concept-workspace",template:"concept/workspace",itemView:c.ConceptForm,errorView:a,regions:{main:".main-region"},regionViews:{main:r.Welcome},initialize:function(){if(this.data={},!(this.data.concepts=this.options.concepts))throw new Error("concept collection required");if(!(this.data.context=this.options.context))throw new Error("context model required");this.listenTo(o,o.CONCEPT_FOCUS,this.showItem)},_ensureModel:function(e){return e instanceof o.models.Concept||(e=this.data.concepts.get(e)),e},showItem:function(t){if(t=this._ensureModel(t),!this.currentView||this.currentView.model.id!==t.id){var o={model:t,context:this.data.context},n=s.resolveFormOptions(t,"concepts");if(o=e.extend(o,n.options),n.module){var r=this;require([n.module],function(e){r.createView(e,o)},function(e){r.showErrorView(t),i.debug(e)})}else this.createView(n.view||this.itemView,o)}},createView:function(e,t){try{var i=new e(t);this.setView(i)}catch(n){if(this.showErrorView(t.model),o.config.get("debug"))throw n}},showErrorView:function(e){var t=new this.errorView({model:e});this.currentView=t,this.main.show(t)},setView:function(e){this.currentView=e,this.main.show(e)},onRender:function(){var e=new this.regionViews.main;this.main.show(e)}});return{ConceptWorkspace:w}});
//# sourceMappingURL=workspace.js.map